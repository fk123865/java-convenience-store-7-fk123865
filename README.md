# java-convenience-store-precourse

## 입력
- 구매할 상품을 입력받는 기능
- 프로모션 할인에 관한 입력을 받는 기능
- 멤버실 할인에 관한 입력을 받는 기능
- 다시 구매를 진행할 의사에 관한 입력을 받는 기능

## 기능 목록
- 사용자가 입력한 상품의 가격과 수량을 기반으로 최종 결제 금액을 계산한다.
    - 상품의 가격과 수량을 기반으로 재고를 확인한다.
- 총구매액은 상품별 가격과 수량을 곱하여 계산하며, 프로모션 및 멤버십 할인 정책을 반영하여 최종 결제 금액을 산출한다.
- 구매 내역과 산출한 금액 정보를 영수증으로 출력한다.
- 영수증 출력 후 추가 구매를 진행할지 또는 종료할지를 선택할 수 있다.

### 재고 수량 객체화 하기
- 각 상품의 재고 수량을 확인 할 수 있도록 파일로 되어 있는 상품의 재고를 객체화 한다.
    - 상품과 프로모션 두 개의 객체로 생성한다.
- 객체화 되어 있는 상품의 재고와 상품 주문을 비교하여 결제 가능 여부를 파악한다.

#### Promotion
- promotions.md 파일을 사용하여 객체화 한다.
- 오늘 날짜가 해당 프로모션 기간 내에 포함되어 있는지 확인한다.
- 해당 프로모션 혜택을 받기 위해 N개를 구매하였는지 확인한다.
- 프로모션 혜택을 받기 위한 갯수와 같은지 확인한다.
- 증정 상품이 몇 개인지 반환한다.
- 프로모션 상품의 재고만으로 부족할 때 몇 개 부족한지 알려준다.


#### Product
- products.md 파일을 사용하여 객체화 한다.
    - 파일명을 잘못 작성할 경우 예외를 발생한다.
- 각 상품의 재고 수량을 고려하여 결제 가능 여부를 확인한다.
- 프로모션 상품을 사용해야 할 경우 날짜를 확인한다.
  - 날짜를 확인하여 프로모션 기간이 아닌 경우에는 일반 상품을 사용하도록 한다.
- 프로모션 상품을 사용해야 할 때 프로모션 구매 조건와 같은 개수이면 추가할 것인지 묻는다.
- 프로모션 상품의 재고가 부족한 경우 일반 상품의 재고를 사용할 수 있도록 부족한 개수를 알려준다.
  - 일반 상품의 재고를 사용할 것인지 묻는다.
- 일반 상품의 재고를 사용할 땐 멤버십 할인이 가능하기 때문에 일반 재고에서 계산한 금액을 반환해준다.
- 출력 할 때의 상태와 파일에 작성할 때의 상태를 관리한다.

#### 할인 기능
- 증정 상품이 있을 때의 할인 기능
  - 증정 상품이 있을 경우에만 할인한다.
  - 증정 상품의 개수와 가격을 곱하여 할인 금액을 계산한다.
- 멤버쉽 할인을 원하는 경우의 할인 기능
  - 멤버쉽 할인을 원하는 경우에만 할인한다.
  - 프로모션 재고를 사용한 경우에는 제외한다.
  - 일반 재고를 사용한 경우에만 할인한다.
  - 일반 재고의 금액에서 30% 할인한다.

#### 영수증 출력 기능
- 사용자가 영수증을 보기 위해서 영수증 형태로 만들어 주는 기능
  - 주문 내역을 영수증 형태로 만들어 준다.
  - 증정 상품이 있을 경우에만 증정 상품에 대한 영수증을 만든다.
  - 총 금액, 할인 금액, 내실 돈을 영수증 형태로 만든다.
  - 세 형태의 영수증을 하나로 만든다.


#### 재고 관리
- 일반 상품과 프로모션 상품을 각각 보관한다.
- 주문이 들어오면 프로모션 상품을 확인하고 없으면 일반 상품을 사용한다.
  - 둘 다 없는 경우에는 예외를 발생한다.
- 주문이 들어왔을 때 구매가 가능한 상태인지 확인한다.
  - 프로모션 상품을 사용하는 경우에는 부족할 경우 일반 상품의 재고를 사용한다.
  - 일반 상품의 재고가 부족할 경우에는 예외를 발생한다.
- 고객이 상품을 구매할 때마다, 결제된 수량만큼 해당 상품의 재고에서 차감하여 수량을 관리한다.
- 재고를 차감함으로써 시스템은 최신 재고 상태를 유지하며, 다음 고객이 구매할 때 정확한 재고 정보를 제공한다.
  - 최신 상태를 유지하기 위해서 모든 주문이 끝나면 Produt 객체들을 파일로 다시 작성한다.

## 출력 기능
- 편의점의 물품들을 출력한다.
- 영수증을 출력한다.
- 예외 상황을 출력한다.

## 입력 예외 상황
- 구매할 상품을 입력받을 때 예외 상황
  - 주문의 형식이 잘못되면 예외를 발생한다.
  - 주문 갯수가 숫자가 아니면 예외가 발생한다.
- Yes or No를 선택하는 입력을 받을 때 예외 상황
  - 입력이 두 글자 이상이면 예외를 발생한다.
  - 입력이 알파벳이 아니면 예외를 발생한다.
  - 입력이 Y 또는 N이 아니면 예외를 발생한다.